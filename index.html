<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è –º–æ–µ–π –ª—é–±–∏–º–æ–π –°–æ–Ω–∏</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Georgia:ital@1&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; background: #fff5f7; font-family: 'Montserrat', sans-serif; color: #4a4a4a; overflow-x: hidden; }
        
        /* –ö–ù–û–ü–ö–ê-–°–ï–†–î–¶–ï –î–õ–Ø –ú–£–ó–´–ö–ò */
        .music-heart-btn {
            position: fixed; top: 20px; left: 20px; z-index: 1000;
            background: white; border: 2px solid #000; width: 55px; height: 55px;
            border-radius: 50%; cursor: pointer; display: flex; align-items: center;
            justify-content: center; font-size: 28px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: 0.3s;
        }
        
        /* –ü–û–õ–ó–£–ù–û–ö –ì–†–û–ú–ö–û–°–¢–ò */
        .volume-container {
            position: fixed; top: 85px; left: 20px; z-index: 1000;
            background: white; border: 2px solid #000; padding: 8px;
            border-radius: 10px; display: flex; align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .volume-slider {
            width: 80px; height: 5px; cursor: pointer; accent-color: #d63384;
        }
        
        /* –ü–£–õ–¨–°–ê–¶–ò–Ø –ü–†–ò –í–û–°–ü–†–û–ò–ó–í–ï–î–ï–ù–ò–ò */
        .music-heart-btn.active {
            animation: heart-beat-music 1.2s infinite;
            background: #fff0f3;
            border-color: #d63384;
        }

        @keyframes heart-beat-music {
            0% { transform: scale(1); }
            15% { transform: scale(1.25); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
        }

        .stars-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0; animation: twinkle var(--duration) infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0; transform: scale(0.5); } 50% { opacity: 0.7; transform: scale(1.2); } }

        header { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: white; position: relative; z-index: 2; }
        h1 { font-weight: 700; font-size: 3rem; color: #000; margin-bottom: 10px; animation: heartbeat 1.5s infinite; padding: 0 20px; }
        .scroll-hint { position: absolute; bottom: 30px; font-size: 0.9rem; color: #bbb; }
        
        .container { max-width: 700px; margin: 0 auto; padding: 50px 20px; position: relative; z-index: 2; }
        .story-card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); margin-bottom: 50px; text-align: center; opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; position: relative; }
        .story-card.visible { opacity: 1; transform: translateY(0); }
        .img-container { position: relative; display: inline-block; width: 100%; cursor: pointer; }
        .story-card img { width: 100%; border-radius: 10px; margin-bottom: 20px; }
        .story-card p { font-family: 'Georgia', serif; font-size: 1.2rem; line-height: 1.6; font-style: italic; }
        .date { display: block; margin-top: 15px; font-size: 0.8rem; color: #000; font-weight: 700; text-transform: uppercase; }

        .timer-container { text-align: center; margin: -30px auto 40px; position: relative; z-index: 3; }
        .timer-box { background: white; display: inline-block; padding: 15px 30px; border-radius: 15px; border: 2px solid #000; }
        #timer { font-weight: 700; font-size: 1.3rem; color: #000; }

        .catch-game { height: 300px; background: #fff0f3; border: 2px solid #000; border-radius: 15px; position: relative; overflow: hidden; cursor: crosshair; margin-top: 15px; }
        .catch-heart { position: absolute; font-size: 30px; cursor: pointer; user-select: none; z-index: 5; }
        .game-score { font-weight: 700; color: #000; margin-bottom: 10px; }

        .memory-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
        .memory-card { height: 70px; background: #000; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px; color: transparent; transition: 0.3s; }
        .memory-card.flipped { background: #fff; border: 2px solid #000; color: #d63384; }
        .memory-card.matched { background: #fff0f3; color: #d63384; border: none; cursor: default; }

        .flower-container { position: relative; width: 200px; height: 200px; margin: 0 auto; cursor: pointer; }
        .petal { position: absolute; width: 40px; height: 90px; background: #ffc1d1; border: 1px solid #ff99b3; border-radius: 50px; left: 80px; transform-origin: bottom center; transition: 0.5s; }
        .flower-center { position: absolute; width: 60px; height: 60px; background: #ffd700; border-radius: 50%; left: 70px; top: 70px; z-index: 10; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 700; }
        .petal.plucked { opacity: 0; transform: translateY(-100px) rotate(45deg); pointer-events: none; }

        .hug-btn { background: #000; color: white; border: none; padding: 14px 28px; border-radius: 50px; cursor: pointer; font-weight: 700; transition: 0.3s; margin-top: 10px; font-family: 'Montserrat', sans-serif; }
        .hug-btn:hover { background: #d63384; }

        .love-map { background: white; border: 2px solid #000; padding: 25px; border-radius: 15px; margin-bottom: 50px; text-align: center; }
        .love-slider { width: 100%; height: 10px; background: #fff5f7; border: 1px solid #000; border-radius: 5px; outline: none; appearance: none; margin: 20px 0; }
        .love-slider::-webkit-slider-thumb { appearance: none; width: 25px; height: 25px; background: #000; border-radius: 50%; cursor: pointer; }
        #love-status { font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 1.1rem; color: #d63384; min-height: 1.5em; transition: 0.3s; }

        .promise-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 30px 0; }
        .promise-item { background: white; border: 2px solid #000; padding: 20px; border-radius: 15px; cursor: pointer; transition: 0.3s; font-weight: 700; font-size: 0.9rem; }
        .promise-item:active { transform: scale(0.95); background: #000; color: white; }
        .reason-btn { background: #000; color: white; border: none; padding: 12px 25px; border-radius: 10px; font-weight: 700; cursor: pointer; transition: 0.3s; font-family: 'Montserrat', sans-serif; }

        .ps-text { position: fixed; bottom: 20px; right: 20px; font-size: 14px; color: #000; opacity: 0.8; font-style: italic; z-index: 100; background: rgba(255, 255, 255, 0.7); padding: 8px 12px; border-radius: 12px; border: 1px solid #000; }
        .surprise-btn { background: #000; color: white; border: none; padding: 15px 30px; font-size: 1.2rem; border-radius: 15px; cursor: pointer; font-weight: 700; display: block; margin: 40px auto; animation: pulse 2s infinite; }

        #modal, #love-modal, #hug-modal, #game-modal, #memory-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 40px; border-radius: 20px; border: 3px solid #000; z-index: 1000; text-align: center; width: 80%; max-width: 400px; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 999; }
        .hug-img { width: 100%; border-radius: 15px; margin-bottom: 15px; }
        .heart { position: fixed; top: -10vh; font-size: 20px; color: #d63384; z-index: 1; pointer-events: none; animation: fall linear forwards; }
        .burst-heart { position: fixed; pointer-events: none; z-index: 1001; animation: burst 1s ease-out forwards; }
        .photo-heart { position: absolute; pointer-events: none; color: #d63384; font-size: 18px; z-index: 5; animation: floatUp 3s ease-out forwards; }

        @keyframes floatUp { 0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 100% { transform: translateY(-120px) scale(2) rotate(25deg); opacity: 0; } }
        @keyframes fall { to { transform: translateY(110vh) translateX(20px) rotate(360deg); } }
        @keyframes burst { to { transform: translate(var(--dx), var(--dy)) scale(0) rotate(360deg); opacity: 0; } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        footer { font-weight: 700; text-align: center; padding: 100px 50px; font-size: 1.5rem; color: #000; position: relative; z-index: 2; }
    </style>
</head>
<body>

    <div class="music-heart-btn" id="musicHeart" onclick="toggleMusic()">‚ù§Ô∏è</div>
    
    <div class="volume-container">
        <span style="font-size: 12px; margin-right: 5px;">üîâ</span>
        <input type="range" min="0" max="1" step="0.1" value="0.5" class="volume-slider" id="volumeSlider" oninput="changeVolume(this.value)">
    </div>

    <audio id="myAudio" loop preload="auto">
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div class="stars-container" id="stars"></div>
    <div class="ps-text">p.s –î–ª—è –º–æ–µ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –¥–µ–≤–æ—á–∫–∏ –°–æ–Ω–∏</div>

    <header>
        <h1>–õ—é–±–ª—é —Ç–µ–±—è —Å–∏–ª—å–Ω–æ, –ª—é–±–∏–º–∫–∞ –º–æ—è</h1>
        <button class="hug-btn" onclick="showHug()">–û–±–Ω—è—Ç—å –∏–∑ –ü–∞–≤–ª–æ–¥–∞—Ä–∞ –≤ –û–º—Å–∫ </button>
        <div class="scroll-hint">–ª–∏—Å—Ç–∞–π –Ω–∏–∂–µ ‚Üì</div>
    </header>

    <div class="timer-container">
        <div class="timer-box">
            <span style="color: #666; font-size: 0.8rem; display: block; margin-bottom: 5px; font-weight: 700;">–ú–´ –í–°–¢–†–ï–ß–ê–ï–ú–°–Ø –£–ñ–ï:</span>
            <span id="timer">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
    </div>

    <div class="container">
        <div class="love-map story-card visible">
            <h3 style="margin-top: 0;">–ö–∞–∫ —Å–∏–ª—å–Ω–æ —Ç—ã –º–µ–Ω—è –ª—é–±–∏—à—å —Å–µ–≥–æ–¥–Ω—è?</h3>
            <input type="range" min="1" max="100" value="50" class="love-slider" id="loveRange">
            <p id="love-status">–ù—É, –ø–æ—Ç—è–Ω–∏ –∑–∞ –∫—Ä—É–∂–æ—á–µ–∫...</p>
        </div>

        <div class="story-card">
            <h3 style="margin-top: 0;">–ò–≥—Ä–∞: –ü–æ–π–º–∞–π –º–æ—é –ª—é–±–æ–≤—å ‚ù§Ô∏è</h3>
            <div class="game-score">–°–æ–±—Ä–∞–Ω–æ —Å–µ—Ä–¥–µ—á–µ–∫: <span id="score">0</span>/10</div>
            <div class="catch-game" id="catch-game">
                <p style="color: #bbb; margin-top: 130px; font-size: 0.8rem;">–ù–∞–∂–∏–º–∞–π –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–∏!</p>
            </div>
            <button class="hug-btn" onclick="startGame()" id="start-btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>

        <div class="story-card">
            <h3 style="margin-top: 0;">–ù–∞–π–¥–∏ –ø–∞—Ä—ã –Ω–∞—à–∏—Ö —á—É–≤—Å—Ç–≤ ‚ù§Ô∏è</h3>
            <div class="memory-grid" id="memory-grid"></div>
        </div>

        <div class="story-card">
            <div class="img-container" onmousemove="spawnPhotoHeart(event)" ontouchmove="spawnPhotoHeart(event)">
                <img src="https://i.pinimg.com/originals/06/f9/52/06f952ca0f46163e7840339b1679bba4.jpg" alt="–Ø —Ç–µ–±—è –ª—é–±–ª—é">
            </div>
            <p>"–ó–Ω–∞–µ—à—å, –≤ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å, –∫–∞–∫ –º—ã –Ω–∞—á–∞–ª–∏ –æ–±—â–∞—Ç—å—Å—è, —è –¥–∞–∂–µ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω–µ –º–æ–≥, —á—Ç–æ —Å–º–æ–≥—É –ø–æ–ª—é–±–∏—Ç—å —Ç–µ–±—è –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ. –¢—ã —Å—Ç–∞–ª–∞ –¥–ª—è –º–µ–Ω—è –≤—Å–µ–º. –Ø –ø–æ–º–Ω—é, –∫–∞–∫ –º—ã —Å–º–µ—è–ª–∏—Å—å –∏ –æ–±—â–∞–ª–∏—Å—å —Å—É—Ç–∫–∞–º–∏, –∫–∞–∫ —Å–º–æ—Ç—Ä–µ–ª–∏ —Ñ–∏–ª—å–º—ã –∏ –æ–±—Å—É–∂–¥–∞–ª–∏ –∏—Ö —á–∞—Å–∞–º–∏. –Ø –æ—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤, —á—Ç–æ —Å—É–¥—å–±–∞ —Å–≤–µ–ª–∞ –Ω–∞—Å –≤–º–µ—Å—Ç–µ"</p>
            <span class="date">8 –∞–ø—Ä–µ–ª—è 2025</span>
        </div>

        <div class="story-card interactive-card">
            <h3 style="margin-top: 0;">–ü–æ—á–µ–º—É —è —Ç–µ–±—è –ª—é–±–ª—é?</h3>
            <p id="reason-text" style="min-height: 60px; font-family: 'Montserrat', sans-serif; font-style: normal;">–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, —Å–æ–ª–Ω—Ü–µ...</p>
            <button class="reason-btn" onclick="nextReason()">–£–∑–Ω–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É</button>
        </div>

        <div class="story-card">
            <div class="img-container" onmousemove="spawnPhotoHeart(event)" ontouchmove="spawnPhotoHeart(event)">
                <img src="https://basket-25.wbbasket.ru/vol4519/part451905/451905605/images/big/1.webp" alt="–ù–∞—à –º–æ–º–µ–Ω—Ç">
            </div>
            <p>"–°–µ–π—á–∞—Å —è —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ —Ç—ã ‚Äî —Ç–æ—Ç —Å–∞–º—ã–π —á–µ–ª–æ–≤–µ–∫, —Å –∫–æ—Ç–æ—Ä—ã–º —è —Ö–æ—á—É –ø—Ä–æ–∂–∏—Ç—å –≤—Å—é —Å–≤–æ—é –∂–∏–∑–Ω—å –∏ —É–º–µ—Ä–µ—Ç—å –≤ —Å—Ç–∞—Ä–æ—Å—Ç–∏. –Ø –±–µ–∑—É–º–Ω–æ —Å–∏–ª—å–Ω–æ —Ç–µ–±—è –ª—é–±–ª—é –∏ –≥–æ—Ç–æ–≤ –±—ã—Ç—å —Å —Ç–æ–±–æ–π –≤—Å—é —Å–≤–æ—é –∂–∏–∑–Ω—å"</p>
            <span class="date">–ù–∞–≤—Å–µ–≥–¥–∞</span>
        </div>

        <div class="story-card">
            <h3 style="margin-top: 0;">–†–æ–∑–æ–≤–∞—è —Ä–æ–º–∞—à–∫–∞ –∂–µ–ª–∞–Ω–∏–π ‚ú®</h3>
            <div class="flower-container" id="flower" onclick="pluckPetal()">
                <div class="flower-center">–ù–ê–ñ–ú–ò</div>
            </div>
            <p id="petal-text" style="margin-top: 20px; font-weight: 700; color: #d63384; min-height: 1.5em;"></p>
        </div>

        <div class="story-card">
            <img src="https://i.pinimg.com/736x/a3/63/a7/a363a7b4439d134c6f822cf911be1f18.jpg" alt="–ú–∏–ª—ã–µ –∫–æ—Ç–∏–∫–∏">
            <p>"–ò —Ç–æ–≥–¥–∞, –∏ —Å–µ–π—á–∞—Å —è –±–µ–∑—É–º–Ω–æ –≥–æ—Ä—é –∂–µ–ª–∞–Ω–∏–µ–º –æ–±—â–∞—Ç—å—Å—è —Å —Ç–æ–±–æ–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –¢—ã –¥–∞—Ä–∏—à—å –º–Ω–µ —Ç–µ —á—É–≤—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∞—Ä–∏—Ç—å –Ω–∏–∫—Ç–æ –¥—Ä—É–≥–æ–π. –¢—ã ‚Äî —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏"</p>
            <span class="date">–ü—Ä–æ—Å—Ç–æ —É–ª—ã–±–Ω–∏—Å—å</span>
        </div>

        <div class="story-card">
            <img src="https://img.freepik.com/premium-vector/vector-highly-stylized-image-two-people-hugging-trendy-color-palette-valentine-s-day-card_381442-144.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫">
            <p>"–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ –≤–æ –≤—Å—ë–º: —Ç–≤–æ–π –∑–∞–ø–∞—Ö, —Ç–≤–æ—è —É–ª—ã–±–∫–∞, —Ç–≤–æ–∏ –≥–ª–∞–∑–∞, —Ç–≤–æ–π –∞–Ω–≥–µ–ª—å—Å–∫–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—Ä–∏—Ç –º–Ω–µ —Ç—É —Å–∞–º—É—é –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω—É—é —É–ª—ã–±–∫—É... –¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞, –¥–µ–≤–æ—á–∫–∞ –º–æ—è!"</p>
            <span class="date">–î–ª—è —Å–∞–º–æ–π –ª—É—á—à–µ–π</span>
        </div>

        <div class="story-card interactive-card">
            <h3 style="margin-top: 0;">–ú–æ—è –∫–Ω–∏–≥–∞ –æ–±–µ—â–∞–Ω–∏–π</h3>
            <p style="font-size: 1rem; font-family: 'Montserrat', sans-serif; font-style: normal;">–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É, —á—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å</p>
            <div class="promise-grid">
                <div class="promise-item" onclick="this.innerText='–í—Å–µ–≥–¥–∞ –±—É–¥—É —Ä—è–¥–æ–º üíó '">–û–±–µ—â–∞–Ω–∏–µ ‚Ññ1</div>
                <div class="promise-item" onclick="this.innerText='–í—Å–µ–≥–¥–∞ –±—É–¥—É –ª—é–±–∏—Ç—å üíó'">–û–±–µ—â–∞–Ω–∏–µ ‚Ññ2</div>
                <div class="promise-item" onclick="this.innerText='–í—Å–µ–≥–¥–∞ –±—É–¥—É –æ–±–Ω–∏–º–∞—Ç—å üíó'">–û–±–µ—â–∞–Ω–∏–µ ‚Ññ3</div>
                <div class="promise-item" onclick="this.innerText='–í—Å–µ–≥–¥–∞ –±—É–¥—É —Ü–µ–Ω–∏—Ç—å üíó'">–û–±–µ—â–∞–Ω–∏–µ ‚Ññ4</div>
                <div class="promise-item" onclick="this.innerText='–í—Å–µ–≥–¥–∞ –±—É–¥—É –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å! üíó'">–û–±–µ—â–∞–Ω–∏–µ ‚Ññ5</div>
                <div class="promise-item" onclick="this.innerText='–í—Å–µ–≥–¥–∞ –±—É–¥—É —Ä—è–¥–æ–º üíó'">–û–±–µ—â–∞–Ω–∏–µ ‚Ññ6</div>
            </div>
        </div>

        <button class="surprise-btn" onclick="showSurprise()">–ù–∞–∂–º–∏ —Å—é–¥–∞, –∫–æ—Ç–µ–Ω–æ—á–µ–∫ –º–æ–π</button>
    </div>

    <div id="overlay" onclick="closeAllModals()"></div>
    
    <div id="hug-modal">
        <img src="https://i.pinimg.com/474x/2a/08/db/2a08db4842120d265c8a53d92331effa.jpg?nii=t" alt="–û–±—ä—è—Ç–∏—è" class="hug-img">
        <p style="font-weight: 700;">–ö—Ä–µ–ø–∫–æ–µ –æ–±—ä—è—Ç–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∏–∑ –ü–∞–≤–ª–æ–¥–∞—Ä–∞ –ø—Ä—è–º–∏–∫–æ–º –≤ –û–º—Å–∫! ‚ù§Ô∏è</p>
        <button class="hug-btn" onclick="closeAllModals()">–õ—é–±–ª—é —Ç–µ–±—è!</button>
    </div>

    <div id="memory-modal"><h2>–¢—ã —Å—É–ø–µ—Ä! ‚ù§Ô∏è</h2><p>–ü–∞—Ä—ã –Ω–∞–π–¥–µ–Ω—ã! –ö–∞–∫ –∏ –º—ã —Å —Ç–æ–±–æ–π –Ω–∞—à–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞.</p><button class="hug-btn" onclick="closeAllModals()">–î–∞–ª—å—à–µ</button></div>
    <div id="game-modal"><h2>–¢—ã –ø–æ–±–µ–¥–∏–ª–∞! ‚ù§Ô∏è</h2><p>–ü–æ–π–º–∞–ª–∞ –≤—Å—é –º–æ—é –ª—é–±–æ–≤—å!</p><button class="hug-btn" onclick="closeAllModals()">–£—Ä–∞!</button></div>
    <div id="love-modal"><h2 style="font-weight: 700; color: #d63384;">–°–æ–Ω—è! ‚ù§Ô∏è</h2><p>–Ø —Ç–µ–±—è —Ç–æ–∂–µ –æ—á–µ–Ω—å –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é!</p><button class="surprise-btn" style="font-size: 1rem;" onclick="closeAllModals()">–ó–∞–∫—Ä—ã—Ç—å ‚ù§Ô∏è</button></div>
    <div id="modal"><h2 style="font-weight: 700;">–°–æ–Ω—è! ‚ù§Ô∏è</h2><p>–¢—ã —É –º–µ–Ω—è —Å–∞–º–∞—è –ª—É—á—à–∞—è –¥–µ–≤–æ—á–∫–∞ –Ω–∞ —Å–≤–µ—Ç–µ. –ú–Ω–µ —Ç–∞–∫ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–µ–±—è –æ–±–Ω–∏–º–∞—Ç—å –∏ —Ü–µ–ª–æ–≤–∞—Ç—å!</p><button class="surprise-btn" style="font-size: 1rem;" onclick="closeAllModals()">–ó–∞–∫—Ä—ã—Ç—å</button></div>

    <footer>–Ø —Ç–µ–±—è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é! ‚ù§Ô∏è</footer>

    <script>
        const startDate = new Date(2025, 6, 3, 14, 5); 
        function updateTimer() {
            const diff = new Date() - startDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const mins = Math.floor((diff / (1000 * 60)) % 60);
            const secs = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerHTML = days + "–¥ " + hours + "—á " + mins + "–º " + secs + "—Å";
        }
        setInterval(updateTimer, 1000); updateTimer();

        // –§–£–ù–ö–¶–ò–Ø –ú–£–ó–´–ö–ò –ò –ì–†–û–ú–ö–û–°–¢–ò
        const audio = document.getElementById('myAudio');
        audio.volume = 0.5; // –ì—Ä–æ–º–∫–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50%

        function toggleMusic() {
            const heartBtn = document.getElementById('musicHeart');
            if (audio.paused) {
                audio.play().catch(e => console.log("–ù—É–∂–µ–Ω –∫–ª–∏–∫ –°–æ–Ω–∏"));
                heartBtn.classList.add('active');
            } else {
                audio.pause();
                heartBtn.classList.remove('active');
            }
        }

        function changeVolume(val) {
            audio.volume = val;
        }

        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 40; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + 'vw';
            star.style.top = Math.random() * 100 + 'vh';
            star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
            starsContainer.appendChild(star);
        }

        let score = 0; let gameActive = false;
        function startGame() { score = 0; gameActive = true; document.getElementById('score').innerText = score; document.getElementById('start-btn').style.display = 'none'; spawnGameHeart(); }
        function spawnGameHeart() {
            if(!gameActive) return;
            const h = document.createElement('div'); h.className = 'catch-heart'; h.innerText = '‚ù§Ô∏è';
            h.style.left = Math.random() * 90 + '%'; h.style.top = Math.random() * 80 + '%';
            h.onclick = (e) => { e.stopPropagation(); score++; document.getElementById('score').innerText = score; h.remove(); if(score >= 10) { gameActive = false; showModal('game-modal'); document.getElementById('start-btn').style.display = 'inline-block'; } else spawnGameHeart(); };
            document.getElementById('catch-game').appendChild(h);
        }

        const symbols = ['‚ù§Ô∏è', 'ü´Ç', '‚ú®', 'üå∏', 'üìû', '‚úàÔ∏è', 'üíé', 'üíå'];
        let cards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
        const grid = document.getElementById('memory-grid');
        let flippedCards = []; let matchedCount = 0;
        cards.forEach((symbol) => {
            const card = document.createElement('div'); card.className = 'memory-card'; card.dataset.symbol = symbol;
            card.onclick = () => { if (flippedCards.length < 2 && !card.classList.contains('flipped') && !card.classList.contains('matched')) { card.classList.add('flipped'); card.innerText = card.dataset.symbol; flippedCards.push(card); if (flippedCards.length === 2) setTimeout(checkMatch, 600); } };
            grid.appendChild(card);
        });
        function checkMatch() {
            const [c1, c2] = flippedCards;
            if (c1.dataset.symbol === c2.dataset.symbol) { c1.classList.add('matched'); c2.classList.add('matched'); matchedCount++; if (matchedCount === symbols.length) showModal('memory-modal'); } else { c1.classList.remove('flipped'); c2.classList.remove('flipped'); c1.innerText = ''; c2.innerText = ''; }
            flippedCards = [];
        }

        const petalTexts = ["–õ—é–±–∏—Ç", "–û–±–æ–∂–∞–µ—Ç", "–°–∫—É—á–∞–µ—Ç", "–ñ–¥—ë—Ç", "–¶–µ–Ω–∏—Ç", "–í–æ—Å—Ö–∏—â–∞–µ—Ç—Å—è", "–•–æ—á–µ—Ç –æ–±–Ω—è—Ç—å", "–õ–Æ–ë–ò–¢ –ù–ê–í–°–ï–ì–î–ê! ‚ù§Ô∏è"];
        const flower = document.getElementById('flower');
        for (let i = 0; i < 8; i++) { const p = document.createElement('div'); p.className = 'petal'; p.style.transform = `rotate(${i * 45}deg)`; flower.appendChild(p); }
        function pluckPetal() { const petals = document.querySelectorAll('.petal:not(.plucked)'); if (petals.length > 0) { petals[petals.length - 1].classList.add('plucked'); document.getElementById('petal-text').innerText = petalTexts[8 - petals.length]; } }

        const slider = document.getElementById('loveRange'); const status = document.getElementById('love-status');
        slider.oninput = function() { let val = this.value; if(val < 20) status.innerText = "–ù—É, –Ω–µ–º–Ω–æ–∂–∫–æ... ü§è"; else if(val < 50) status.innerText = "–°–∏–ª—å–Ω–æ! ‚ù§Ô∏è"; else if(val < 80) status.innerText = "–ë–µ–∑—É–º–Ω–æ! üíñ"; else if(val < 100) status.innerText = "–ë–æ–ª—å—à–µ –≤—Å–µ—Ö –≤ –º–∏—Ä–µ! ‚ôæÔ∏è"; else { status.innerText = "–°–ï–†–î–¶–ï –°–ï–ô–ß–ê–° –í–ó–û–†–í–ï–¢–°–Ø! üí•"; showLoveSurprise(); } };

        function showHug() { showModal('hug-modal'); burstHearts(); }
        function showLoveSurprise() { showModal('love-modal'); burstHearts(); }
        function showSurprise() { showModal('modal'); burstHearts(); }
        function showModal(id) { document.getElementById(id).style.display = 'block'; document.getElementById('overlay').style.display = 'block'; }

        function spawnPhotoHeart(e) {
            const container = e.currentTarget; const heart = document.createElement('div'); heart.classList.add('photo-heart'); heart.innerText = '‚ù§Ô∏è';
            const rect = container.getBoundingClientRect(); const clientX = e.clientX || (e.touches && e.touches[0].clientX); const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            heart.style.left = (clientX - rect.left) + 'px'; heart.style.top = (clientY - rect.top) + 'px'; container.appendChild(heart); setTimeout(() => heart.remove(), 3000);
        }

        const reasons = ["–¢–≤–æ—è —É–ª—ã–±–∫–∞ –æ—Å–≤–µ—â–∞–µ—Ç –º–æ–π —Å–∞–º—ã–π –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å", "–£ —Ç–µ–±—è —Å–∞–º–æ–µ –¥–æ–±—Ä–æ–µ –∏ –∏—Å–∫—Ä–µ–Ω–Ω–µ–µ —Å–µ—Ä–¥—Ü–µ", "–†—è–¥–æ–º —Å —Ç–æ–±–æ–π —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º", "–Ø –æ–±–æ–∂–∞—é —Ç–≤–æ–π —Å–º–µ—Ö –∏ —Ç–≤–æ—é —É–ª—ã–±–∫—É", "–¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å –º–µ–Ω—è –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤", "–¢—ã –ø—Ä–æ—Å—Ç–æ —Å–∞–º–∞—è –ª—É—á—à–∞—è –¥–µ–≤–æ—á–∫–∞ –≤ –º–∏—Ä–µ"];
        function nextReason() { const text = document.getElementById('reason-text'); const random = reasons[Math.floor(Math.random() * reasons.length)]; text.style.opacity = 0; setTimeout(() => { text.innerText = random; text.style.opacity = 1; }, 300); }

        const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); }); }, { threshold: 0.1 });
        document.querySelectorAll('.story-card').forEach(card => observer.observe(card));

        function createHeart() { const heart = document.createElement('div'); heart.classList.add('heart'); heart.innerText = '‚ù§Ô∏è'; heart.style.left = Math.random() * 100 + "vw"; heart.style.animationDuration = Math.random() * 3 + 4 + "s"; document.body.appendChild(heart); setTimeout(() => heart.remove(), 7000); }
        setInterval(createHeart, 300);

        function burstHearts() { for(let i=0; i<40; i++) { const bh = document.createElement('div'); bh.className = 'burst-heart'; bh.innerText = '‚ù§Ô∏è'; bh.style.left = '50%'; bh.style.top = '50%'; bh.style.setProperty('--dx', (Math.random() - 0.5) * 600 + 'px'); bh.style.setProperty('--dy', (Math.random() - 0.5) * 600 + 'px'); document.body.appendChild(bh); setTimeout(() => bh.remove(), 1000); } }

        function closeAllModals() { const ids = ['modal', 'love-modal', 'hug-modal', 'game-modal', 'memory-modal', 'overlay']; ids.forEach(id => document.getElementById(id).style.display = 'none'); }

        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
    </script>
</body>
</html>
